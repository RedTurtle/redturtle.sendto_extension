<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="redturtle.sendto_extension"
      xml:lang="en" lang="en">

<metal:head fill-slot="head_slot">
    <meta name="robots" content="noindex,follow" />
</metal:head>

<metal:head fill-slot="javascript_head_slot">
    <metal:field-content use-macro="context/@@rt.zptformfield.lines/javascript_helpers" />
    <metal:field-content use-macro="context/@@rt.zptformfield.autocomplete_lines/javascript_helpers" />
</metal:head>

<body>


<metal:title fill-slot="content-title">
    <h1 class="documentFirstHeading"
        i18n:domain="plone"
        i18n:translate="heading_send_page_to">Send this page to someone</h1>
</metal:title>

<metal:description fill-slot="content-description">
    <div class="documentDescription"
         i18n:translate="description_send_page_url_to">
                You can send a link to this page to a know e-mail address filling
                information below.
    </div>
</metal:description>

<metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">

    <form id="sendToForm" method="post" action=""
          tal:attributes="action string:${context/absolute_url}/@@${view/__name__}">
        <fieldset>
            <legend i18n:translate="">Sending information</legend>

            <div class="field">
                <label for="send_from_address" i18n:domain="plone" i18n:translate="label_send_from">From</label>
                <span class="fieldRequired" title="Required"
                      i18n:domain="plone" 
                      i18n:attributes="title title_required;"
                      i18n:translate="label_required">(Required)</span>
                <div class="formHelp"
                     i18n:domain="plone" i18n:translate="help_send_from">
                  Your email address.
                </div>
                <input type="email"
                       id="send_from_address"
                       name="send_from_address"
                       size="40"
                       tal:define="member context/@@plone_portal_state/member;"
                       tal:attributes="value python: request.get('send_from_address', member.getProperty('email',''));"
                       />
            </div>

            <tal:field define="fieldName string:send_to_address;
                               fieldType string:email;
                               fieldLabel view/i18n_send_to_address;
                               fieldHelp view/i18n_send_to_address_help;
                               required python:False;
                               pattern string:[^ @]@[^ @];
                               ">
                <metal:field-content use-macro="context/@@rt.zptformfield.lines/field" />
            </tal:field>

            <tal:field define="fieldName string:send_to_members;
                               source string:${portal_url}/@@query-site-members;
                               fieldLabel view/i18n_send_to_members;
                               fieldHelp view/i18n_send_to_members_help;
                               required python:False;
                               ">
                <metal:field-content use-macro="context/@@rt.zptformfield.autocomplete_lines/field" />
            </tal:field>

            <tal:field define="fieldName string:send_to_groups;
                               source string:${portal_url}/@@query-groups;
                               fieldLabel view/i18n_send_to_groups;
                               fieldHelp view/i18n_send_to_groups_help;
                               required python:False;
                               ">
                <metal:field-content use-macro="context/@@rt.zptformfield.autocomplete_lines/field" />
            </tal:field>

            <div class="field">
                <input type="checkbox" id="cc_me" name="cc_me:boolean:default" value="1" />
                <label for="cc_me" i18n:translate="">Add me to recipients</label>
                <div class="formHelp" i18n:translate="help_cc_me">
                  Add my address to the list of recipients so I can receive the e-mail
                </div>
            </div>

        <input type="hidden" name="form.submitted" value="1" />
        
        <input type="submit" name="Send" value="Send"
               i18n:domain="plone" i18n:attributes="value"/>

        </fieldset>
    </form>

    </metal:content-core>
</metal:content-core>

</body>
</html>
